{"version":3,"file":"dayz.es.js","sources":["../src/moment-range.js","../src/api/event-layout.js","../src/api/constants.js","../src/api/event.js","../src/api/events-collection.js","../src/api/layout.js","../src/event.jsx","../src/label.jsx","../src/day.jsx","../src/x-labels.jsx","../src/y-labels.jsx","../src/dayz.jsx"],"sourcesContent":["import Moment from 'moment';\nimport * as momentRange from 'moment-range';\n\nconst moment = momentRange.extendMoment(Moment);\nexport default moment;\n","const moment = require('moment');\n\n// an event layout describes how an event is displayed.\n// A event may be split into one or more layouts in order to be split across week boundaries\nexport default class EventLayout {\n\n    constructor(layout, event, displayRange) {\n        this.layout = layout;\n        this.event = event;\n        this.stack = 0;\n        this.displayRange = displayRange;\n        this.startsBefore = event.start().isBefore(displayRange.start);\n        this.endsAfter = event.end().isAfter(displayRange.end);\n        this.range = moment.range(\n            moment.max(displayRange.start, event.start()),\n            moment.min(displayRange.end, event.end()),\n        );\n        const latest = moment.min(displayRange.end, event.end());\n        this.span = Math.max(\n            1, Math.round(latest.diff(displayRange.start, 'day', true)),\n        );\n    }\n\n    isEditing() {\n        return this.first && this.event.isEditing();\n    }\n\n    startsOnWeek() {\n        return 0 === this.event.start().day();\n    }\n\n    adjustEventTime(startOrEnd, position, height) {\n        if (position < 0 || position > height) { return; }\n        const time = this.event[startOrEnd]()\n            .startOf('day')\n            .add(this.layout.displayHours[0], 'hours')\n            .add(this.layout.minutesInDay() * (position / height), 'minutes');\n        const { step } = this.event.get('resizable');\n        if (step) {\n            const rounded = Math.round(time.minute() / step) * step;\n            time.minute(rounded).second(0);\n        }\n        this.event.emit('change');\n    }\n\n    inlineStyles() {\n        if ('month' === this.layout.displayingAs() || !this.event.isSingleDay()) {\n            return {};\n        }\n        let { start, end } = this.event.daysMinuteRange();\n        const startOffset = this.layout.displayHours[0] * 60;\n        start -= startOffset;\n        end -= startOffset;\n        const inday = this.layout.minutesInDay();\n        const top = `${((start / inday) * 100).toFixed(2)}%`;\n        const bottom = `${(100 - ((end / inday) * 100)).toFixed(2)}%`;\n        return { top, bottom };\n    }\n\n    isResizable() {\n        return (this.layout.displayingAs() !== 'month' && this.event.get('resizable'));\n    }\n\n    key() {\n        return this.displayRange.start.format('YYYYMMDD') + this.event.key;\n    }\n    setIsResizing(val) {\n        this.isResizing = val;\n    }\n    classNames() {\n        const classes = ['event', `span-${this.span}`, `color-${this.event.colorIndex()}`];\n        if (this.isResizing) classes.push('is-resizing');\n        if (this.startsBefore) classes.push('is-continuation');\n        if (this.endsAfter) classes.push('is-continued');\n        if (this.stack) classes.push(`stack-${this.stack}`);\n        if (this.isEditing()) classes.push('is-editing');\n        if (this.isResizable()) classes.push('is-resizable');\n        return classes.join(' ');\n    }\n\n}\n","export default {\n\n    eventHeight: 20, // px\n\n};\n","import React from 'react';\n\nconst Emitter = require('tiny-emitter');\n\nlet EVENT_COUNTER = 1;\n\nexport default class Event {\n\n    constructor(attributes) {\n        this.attributes = attributes;\n        this.isEvent = true;\n        EVENT_COUNTER += 1;\n        this.key = EVENT_COUNTER;\n        if (!this.attributes.range) {\n            throw new Error('Must provide range');\n        }\n    }\n\n    render(date, layout) {\n        if (this.attributes.render) {\n            return this.attributes.render(date, layout);\n        }\n        return this.defaultRenderImplementation(date, layout);\n    }\n\n    defaultRenderImplementation() {\n        return React.createElement(\n            'div',\n            {},\n            this.attributes.content || this.attributes.range.start.format('MMM DD YYYY'),\n        );\n    }\n\n    get(key) {\n        return this.attributes[key];\n    }\n\n    set(attributes, options) {\n        let changed = false;\n        for (const key in attributes) { // eslint-disable-line no-restricted-syntax\n            if (this.attributes[key] !== attributes[key]) {\n                changed = true;\n                break;\n            }\n        }\n        if (!changed) { return; }\n\n        Object.assign(this.attributes, attributes);\n        this.emitChangeEvent(options);\n    }\n\n    isEditing() {\n        return !!this.attributes.editing;\n    }\n\n    setEditing(isEditing, options = {}) {\n        if (isEditing !== this.isEditing()) {\n            this.attributes.editing = isEditing;\n        }\n        this.emitChangeEvent(options);\n    }\n\n    emitChangeEvent(options = {}) {\n        if (this.collection) {\n            this.collection.emit('change', this);\n        }\n        if (!options || !options.silent) {\n            this.emit('change', this);\n        }\n    }\n\n    range() {\n        return this.attributes.range.clone();\n    }\n\n    isSingleDay() {\n        return 24 > this.attributes.range.end.diff(this.attributes.range.start, 'hours');\n    }\n\n    daysMinuteRange() {\n        const startOfDay = this.attributes.range.start.clone().startOf('day');\n        return {\n            start: this.attributes.range.start.diff(startOfDay, 'minute'),\n            end: this.attributes.range.end.diff(startOfDay, 'minute'),\n        };\n    }\n\n    content() {\n        return this.attributes.content;\n    }\n\n    start() {\n        return this.attributes.range.start;\n    }\n\n    end() {\n        return this.attributes.range.end;\n    }\n\n    colorIndex() {\n        return this.attributes.colorIndex || 0;\n    }\n\n    remove() {\n        this.collection.remove(this);\n        this.isDeleted = true;\n        this.emit('change');\n    }\n\n}\n\nObject.assign(Event.prototype, Emitter.prototype);\n","import Event from './event';\n\nconst Emitter = require('tiny-emitter');\n\nconst lc = event =>\n    event.attributes.range.start.diff(event.attributes.range.end);\n\nconst sortEvents = (eventA, eventB) => {\n    const a = lc(eventA);\n    const b = lc(eventB);\n    return a < b ? -1 : a > b ? 1 : 0; // eslint-disable-line no-nested-ternary\n};\n\nexport default class EventsCollection {\n\n    static Event = Event;\n\n    constructor(events = []) {\n        this.events = [];\n        for (let i = 0, { length } = events; i < length; i += 1) {\n            this.add(events[i], { silent: true });\n        }\n    }\n\n    add(eventAttrs, options = {}) {\n        const event = (eventAttrs instanceof Event) ? eventAttrs : new Event(eventAttrs);\n        event.collection = this;\n        this.events.push(event);\n        if (!options.silent) {\n            this.emit('change');\n        }\n        return event;\n    }\n\n    forEach(fn) {\n        this.events.sort(sortEvents).forEach(fn);\n    }\n\n    length() {\n        return this.events.length;\n    }\n\n    remove(event) {\n        const index = this.events.indexOf(event);\n        if (-1 !== index) {\n            this.events.splice(index, 1);\n            this.emit('change');\n        }\n    }\n\n}\n\nObject.assign(EventsCollection.prototype, Emitter.prototype);\n","import EventLayout from './event-layout';\nimport C from './constants';\nimport moment from '../moment-range';\nimport EventsCollection from './events-collection';\n\nfunction cacheKey(day) {\n    return day.format('YYYYMMDD');\n}\n\n// a layout describes how the calendar is displayed.\nexport default class Layout {\n\n    constructor(options) {\n        Object.assign(this, options);\n        this.cache = Object.create(null);\n\n        let multiDayCount = 0;\n        const cacheMethod = (\n            ('day' === this.display) ? 'addtoDaysCache' : 'calculateSpanningLayout'\n        );\n        if (!this.events) { this.events = new EventsCollection(); }\n        const { range } = this;\n\n        this.events.forEach((event) => {\n            // we only care about events that are in the range we were provided\n            if (range.overlaps(event.range())) {\n                this[cacheMethod](event);\n                if (!event.isSingleDay()) {\n                    multiDayCount += 1;\n                }\n            }\n        });\n        this.multiDayCount = multiDayCount;\n        this.calculateStacking();\n        if (!this.isDisplayingAsMonth() && !this.displayHours) {\n            this.displayHours = this.hourRange();\n        } else {\n            this.displayHours = this.displayHours || [0, 24];\n        }\n    }\n\n    minutesInDay() {\n        return (this.displayHours[1] - this.displayHours[0]) * 60;\n    }\n\n    propsForDayContainer(props) {\n        const classes = ['day'];\n        if (this.isDateOutsideRange(props.day)) {\n            classes.push('outside');\n        }\n        return { className: classes.join(' '), style: { order: props.position } };\n    }\n\n    propsForAllDayEventContainer() {\n        const style = (\n            this.multiDayCount ? { flexBasis: this.multiDayCount * C.eventHeight } : { display: 'none' }\n        );\n        return { className: 'all-day', style };\n    }\n\n    hourRange() {\n        const range = [7, 19];\n        Array.from(this.range.by('days')).forEach((day) => {\n            this.forDay(day).forEach((layout) => {\n                range[0] = Math.min(layout.event.start().hour(), range[0]);\n                range[1] = Math.max(layout.event.end().hour(), range[1]);\n            });\n        });\n        range[1] += 1;\n        return range;\n    }\n\n    getEventsForWeek(start) {\n        const day = start.clone();\n        const weeklyEvents = [];\n        for (let i = 0; i < 7; i++) {\n            const layouts = this.forDay(day);\n            for (let li = 0, { length } = layouts; li < length; li += 1) {\n                weeklyEvents.push(layouts[li]);\n            }\n            day.add(1, 'day');\n        }\n        const minLong = range => moment.max(start, range.start).diff(moment.min(day, range.end), 'minutes');\n        return weeklyEvents.sort((al, bl) => {\n            const a = minLong(al.event.range());\n            const b = minLong(bl.event.range());\n            return a === b ? 0 : a > b ? 1 : -1; // eslint-disable-line no-nested-ternary\n        });\n    }\n\n    calculateStacking() {\n        const firstOfWeek = this.range.start.clone().startOf('week');\n        do {\n            const weeklyEvents = this.getEventsForWeek(firstOfWeek);\n            for (let layoutIndex = 0; layoutIndex < weeklyEvents.length; layoutIndex++) {\n                const layout = weeklyEvents[layoutIndex];\n                // loop through each layout that is before this one\n                let ceilingIndex = 0;\n                for (let pi = layoutIndex - 1; pi >= 0; pi--) {\n                    const prevLayout = weeklyEvents[pi];\n                    if (prevLayout.range.start.isSame(layout.range.start, 'd')) {\n                        ceilingIndex = pi + 1;\n                        break;\n                    }\n                }\n                for (let pi = ceilingIndex; pi < layoutIndex; pi++) {\n                    const prevLayout = weeklyEvents[pi];\n                    if (layout.range.overlaps(prevLayout.range)) {\n                        layout.stack += 1;\n                    }\n                }\n            }\n            firstOfWeek.add(7, 'day');\n        } while (!firstOfWeek.isAfter(this.range.end));\n    }\n\n    isDateOutsideRange(date) {\n        return (this.isDisplayingAsMonth() && this.date.month() !== date.month());\n    }\n\n    forDay(day) {\n        return this.cache[cacheKey(day)] || [];\n    }\n\n    // a single day is easy, just add the event to that day\n    addtoDaysCache(event) {\n        const layout = new EventLayout(this, event, this.range);\n        this.addToCache(this.range.start, layout);\n    }\n\n    // other layouts must break at week boundaries, with indicators if they were/are continuing\n    calculateSpanningLayout(event) {\n        const end = moment.min(this.range.end, event.range().end);\n        const start = moment.max(this.range.start, event.range().start).clone();\n        do {\n            const range = moment.range(start, start.clone().endOf('week'));\n            const layout = new EventLayout(this, event, range);\n            this.addToCache(start, layout);\n            // go to first day of next week\n            start.add(7 - start.day(), 'day');\n        } while (!start.isAfter(end));\n    }\n\n    addToCache(date, eventLayout) {\n        let found = false;\n        for (const key in this.cache) { // eslint-disable-line no-restricted-syntax\n            if (this.cache[key].event === eventLayout.event) {\n                found = true;\n                break;\n            }\n        }\n        if (!found) {\n            eventLayout.first = true; // eslint-disable-line no-param-reassign\n        }\n        const dayCache = this.cache[cacheKey(date)] || (this.cache[cacheKey(date)] = []);\n        dayCache.push(eventLayout);\n    }\n\n    displayingAs() {\n        return this.display;\n    }\n\n    isDisplayingAsMonth() {\n        return 'month' === this.display;\n    }\n\n}\n","import React       from 'react';\nimport ReactDOM    from 'react-dom';\nimport PropTypes   from 'prop-types';\nimport EventLayout from './api/event-layout';\n\nconst IsResizeClass = new RegExp('(\\\\s|^)event(\\\\s|$)');\n\nexport default class Event extends React.Component {\n    static propTypes = {\n        layout:        PropTypes.instanceOf(EventLayout),\n        editComponent: PropTypes.func,\n        onClick:       PropTypes.func,\n        onDoubleClick: PropTypes.func,\n    }\n\n    constructor(props) {\n        super(props);\n        [\n            'onClick', 'onDoubleClick', 'onDoubleClick', 'onDragStart'\n        ].forEach((ev) => {\n            this[ev] = this[ev].bind(this);\n        });\n    }\n\n    onClick(ev) {\n        if (!this.props.onClick) { return; }\n        this.props.onClick(ev, this.props.layout.event);\n        ev.stopPropagation();\n    }\n\n    onDoubleClick(ev) {\n        if (!this.props.onDoubleClick) { return; }\n        this.props.onDoubleClick(ev, this.props.layout.event);\n        ev.stopPropagation();\n    }\n\n    onDragStart(ev) {\n        if (!IsResizeClass.test(ev.target.className)) { return; }\n        const bounds = ReactDOM.findDOMNode(this.refs.element).getBoundingClientRect();\n        let resize;\n        if (ev.clientY - bounds.top < 10) {\n            resize = { type: 'start' };\n        } else if (bounds.bottom - ev.clientY < 10) {\n            resize = { type: 'end' };\n        } else {\n            return;\n        }\n        this.props.onDragStart(resize, this.props.layout);\n    }\n\n    render() {\n        const body = (\n            <div className=\"evbody\" onClick={this.onClick}>\n                {this.props.layout.event.render()}\n            </div>\n        );\n        const Edit = this.props.editComponent;\n        const children = this.props.layout.isEditing() ?\n            (<Edit event={this.props.layout.event} >{body}</Edit>) : body;\n        return (\n            <div\n                ref=\"element\"\n                onMouseDown={this.onDragStart}\n                style={this.props.layout.inlineStyles()}\n                className={this.props.layout.classNames()}\n            >\n                {children}\n            </div>\n        );\n    }\n}\n","import React from 'react'; // eslint-disable-line no-unused-vars\nimport PropTypes from 'prop-types';\n\nconst Label = ({ day }) => (\n    <div className=\"label\">{day.format('D')}</div>\n);\n\nLabel.propTypes = {\n    day: PropTypes.object.isRequired,\n};\n\n\nexport default Label;\n","import React     from 'react';\nimport ReactDOM  from 'react-dom';\nimport PropTypes from 'prop-types';\nimport Event     from './event';\nimport Layout    from './api/layout';\nimport Label     from './label';\n\nconst IsDayClass = new RegExp('(\\\\s|^)(events|day|label)(\\\\s|$)');\n\nexport default class Day extends React.PureComponent {\n    static propTypes = {\n        day:            PropTypes.object.isRequired,\n        layout:         PropTypes.instanceOf(Layout).isRequired,\n        position:       PropTypes.number.isRequired,\n        onClick:        PropTypes.func,\n        onDoubleClick:  PropTypes.func,\n        onEventClick:   PropTypes.func,\n        onEventResize:  PropTypes.func,\n        editComponent:  PropTypes.func,\n        onEventDoubleClick: PropTypes.func,\n    }\n\n    constructor() {\n        super();\n        this.state = { resize: false };\n        [\n            'onClick', 'onDoubleClick', 'onMouseMove', 'onMouseUp', 'onDragStart',\n        ].forEach((ev) => {\n            this[ev] = this[ev].bind(this);\n        });\n    }\n\n    get boundingBox() {\n        return ReactDOM.findDOMNode(this.refs.events || this.refs.root).getBoundingClientRect();\n    }\n\n    onClickHandler(ev, handler) {\n        if (!handler || !IsDayClass.test(ev.target.className) ||\n            (this.lastMouseUp &&\n              (this.lastMouseUp < (new Date()).getMilliseconds() + 100)\n            )) {\n            return;\n        }\n        this.lastMouseUp = 0;\n        const bounds = this.boundingBox;\n        const perc = ((ev.clientY - bounds.top) / ev.target.offsetHeight);\n        const hours = this.props.layout.displayHours[0] +\n                       ((this.props.layout.minutesInDay() * perc) / 60);\n        handler.call(this, ev, this.props.day.clone().startOf('day').add(hours, 'hour'));\n    }\n\n    onClick(ev) { this.onClickHandler(ev, this.props.onClick); }\n    onDoubleClick(ev) { this.onClickHandler(ev, this.props.onDoubleClick); }\n\n    onDragStart(resize, eventLayout) {\n        eventLayout.setIsResizing(true);\n        const bounds = this.boundingBox;\n        Object.assign(resize, { eventLayout, height: bounds.height, top: bounds.top });\n        this.setState({ resize });\n    }\n\n    onMouseMove(ev) {\n        if (!this.state.resize) { return; }\n        const coord = ev.clientY - this.state.resize.top;\n        this.state.resize.eventLayout.adjustEventTime(\n            this.state.resize.type, coord, this.state.resize.height,\n        );\n        this.forceUpdate();\n    }\n\n    onMouseUp(ev) {\n        if (!this.state.resize) { return; }\n        this.state.resize.eventLayout.setIsResizing(false);\n        setTimeout(() => this.setState({ resize: false }), 1);\n        if (this.props.onEventResize) {\n            this.props.onEventResize(ev, this.state.resize.eventLayout.event);\n        }\n        this.lastMouseUp = (new Date()).getMilliseconds();\n    }\n\n    renderEvents() {\n        const asMonth = this.props.layout.isDisplayingAsMonth();\n        const singleDayEvents = [];\n        const allDayEvents    = [];\n        const onMouseMove = asMonth ? null : this.onMouseMove;\n        this.props.layout.forDay(this.props.day).forEach((layout) => {\n            const event = (\n                <Event\n                    layout={layout}\n                    key={layout.key()}\n                    day={this.props.day}\n                    parent={this}\n                    onDragStart={this.onDragStart}\n                    onClick={this.props.onEventClick}\n                    editComponent={this.props.editComponent}\n                    onDoubleClick={this.props.onEventDoubleClick}\n                />\n            );\n            (layout.event.isSingleDay() ? singleDayEvents : allDayEvents).push(event);\n        });\n        const events = [];\n        if (allDayEvents.length || !asMonth) {\n            events.push(\n                <div key=\"allday\" {...this.props.layout.propsForAllDayEventContainer()}>\n                    {allDayEvents}\n                </div>,\n            );\n        }\n        if (singleDayEvents.length) {\n            events.push(\n                <div\n                    key=\"events\" ref=\"events\" className=\"events\"\n                    onMouseMove={onMouseMove} onMouseUp={this.onMouseUp}\n                >\n                    {singleDayEvents}\n                </div>,\n            );\n        }\n        return events;\n    }\n\n    render() {\n        const props = this.props.layout.propsForDayContainer(this.props);\n\n        return (\n            <div\n                ref=\"root\"\n                {...props}\n                onClick={this.onClick}\n                onDoubleClick={this.onDoubleClick}\n            >\n                <Label day={this.props.day} className=\"label\">\n                    {this.props.day.format('D')}\n                </Label>\n                {this.renderEvents()}\n            </div>\n        );\n    }\n}\n","import React  from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class XLabels extends React.PureComponent {\n    static propTypes = {\n        display: PropTypes.oneOf(['month', 'week', 'day']),\n        date:    PropTypes.object.isRequired,\n    }\n\n    get days() {\n        const days = [];\n        if ('day' === this.props.display) {\n            days.push(this.props.date);\n        } else {\n            const day = this.props.date.clone().startOf('week');\n            for (let i = 0; i < 7; i += 1) {\n                days.push(day.clone().add(i, 'day'));\n            }\n        }\n        return days;\n    }\n\n    render() {\n        const format = 'month' === this.props.display ? 'dddd' : 'ddd, MMM Do';\n\n        return (\n            <div className=\"x-labels\">{this.days.map(day =>\n                <div key={day.format('YYYYMMDD')} className=\"day-label\">\n                    {day.format(format)}\n                </div>,\n            )}</div>\n        );\n    }\n}\n","import React     from 'react';\nimport PropTypes from 'prop-types';\nimport moment    from './moment-range';\nimport Layout    from './api/layout';\n\nexport default class YLabels extends React.PureComponent {\n    static propTypes = {\n        display:    PropTypes.oneOf(['month', 'week', 'day']).isRequired,\n        date:       PropTypes.object.isRequired,\n        layout:     PropTypes.instanceOf(Layout).isRequired,\n        timeFormat: PropTypes.string,\n    }\n\n    static defaultProps = {\n        timeFormat: 'ha',\n    }\n\n    get hours() {\n        const [start, end] = this.props.layout.displayHours;\n        return Array(end - start).fill().map((_, i) => i + start);\n    }\n\n    renderLabels() {\n        const day = moment();\n        return this.hours.map(hour =>\n            <div key={hour} className=\"hour\">{day.hour(hour).format(this.props.timeFormat)}</div>,\n        );\n    }\n\n    render() {\n        if ('month' === this.props.display) {\n            return null;\n        }\n        return (\n            <div>\n                <div className=\"y-labels\">\n                    <div {...this.props.layout.propsForAllDayEventContainer()}>All Day</div>\n                    {this.renderLabels()}\n                </div>\n            </div>\n        );\n    }\n}\n","import React     from 'react';\nimport PropTypes from 'prop-types';\nimport moment    from './moment-range';\nimport Layout    from './api/layout';\nimport Day       from './day';\nimport XLabels   from './x-labels';\nimport YLabels   from './y-labels';\nimport EventsCollection from './api/events-collection';\n\nexport default class Dayz extends React.PureComponent {\n    static EventsCollection = EventsCollection;\n\n    static propTypes = {\n        editComponent:     PropTypes.func,\n        date:              PropTypes.object.isRequired,\n        displayHours:      PropTypes.array,\n        display:           PropTypes.oneOf(['month', 'week', 'day']),\n        events:            PropTypes.instanceOf(EventsCollection),\n        onDayClick:        PropTypes.func,\n        onDayDoubleClick:  PropTypes.func,\n        onEventClick:      PropTypes.func,\n        onEventResize:     PropTypes.func,\n        timeFormat:        PropTypes.string,\n    }\n\n    static defaultProps = {\n        display: 'month',\n    }\n\n    componentWillMount() {\n        this.calculateLayout(this.props);\n    }\n\n    componentWillUnmount() {\n        this.detachEventBindings();\n    }\n\n    detachEventBindings() {\n        if (this.props.events) { this.props.events.off('change', this.onEventAdd); }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        this.calculateLayout(nextProps);\n    }\n\n    onEventsChange() {\n        this.calculateLayout(this.props);\n    }\n\n    calculateLayout(props) {\n        const range = moment.range(props.date.clone().startOf(props.display),\n            props.date.clone().endOf(props.display));\n        if (props.events) {\n            this.detachEventBindings();\n            props.events.on('change', this.onEventsChange, this);\n        }\n        if ('month' === props.display) {\n            range.start.subtract(range.start.weekday(), 'days');\n            range.end.add(6 - range.end.weekday(), 'days');\n        }\n        const layout = new Layout({ ...props, range });\n        this.setState({ range, layout });\n    }\n\n    renderDays() {\n        return Array.from(this.state.range.by('days')).map((day, index) =>\n            <Day\n                key={day.format('YYYYMMDD')}\n                day={day}\n                position={index}\n                layout={this.state.layout}\n                editComponent={this.props.editComponent}\n                onClick={this.props.onDayClick}\n                onDoubleClick={this.props.onDayDoubleClick}\n                onEventClick={this.props.onEventClick}\n                onEventResize={this.props.onEventResize}\n            />,\n        );\n    }\n\n    render() {\n        const classes = ['dayz', this.props.display];\n        return (\n            <div className={classes.join(' ')}>\n                <XLabels date={this.props.date} display={this.props.display} />\n                <div className=\"body\">\n                    <YLabels\n                        layout={this.state.layout}\n                        display={this.props.display}\n                        date={this.props.date}\n                        timeFormat={this.props.timeFormat}\n                    />\n                    <div className=\"days\">\n                        {this.renderDays()}\n                        {this.props.children}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n"],"names":["moment","momentRange","Moment","require","EventLayout","layout","event","displayRange","stack","startsBefore","start","isBefore","endsAfter","end","isAfter","range","max","min","latest","span","Math","round","diff","first","isEditing","day","startOrEnd","position","height","time","startOf","add","displayHours","minutesInDay","get","step","rounded","minute","second","emit","displayingAs","isSingleDay","daysMinuteRange","startOffset","inday","top","toFixed","bottom","format","key","val","isResizing","classes","colorIndex","push","isResizable","join","Emitter","EVENT_COUNTER","Event","attributes","isEvent","Error","date","render","defaultRenderImplementation","React","createElement","content","options","changed","assign","emitChangeEvent","editing","collection","silent","clone","startOfDay","remove","isDeleted","Object","prototype","lc","sortEvents","eventA","eventB","a","b","EventsCollection","events","length","i","eventAttrs","fn","sort","forEach","index","indexOf","splice","cacheKey","Layout","cache","create","multiDayCount","cacheMethod","display","overlaps","calculateStacking","isDisplayingAsMonth","hourRange","props","isDateOutsideRange","className","style","order","flexBasis","C","eventHeight","from","by","forDay","hour","weeklyEvents","layouts","li","minLong","al","bl","firstOfWeek","getEventsForWeek","layoutIndex","ceilingIndex","pi","prevLayout","isSame","month","addToCache","endOf","eventLayout","found","dayCache","IsResizeClass","RegExp","ev","bind","onClick","stopPropagation","onDoubleClick","test","target","bounds","ReactDOM","findDOMNode","refs","element","getBoundingClientRect","resize","clientY","type","onDragStart","body","Edit","editComponent","children","inlineStyles","classNames","Component","propTypes","PropTypes","instanceOf","func","Label","object","isRequired","IsDayClass","Day","state","handler","lastMouseUp","Date","getMilliseconds","boundingBox","perc","offsetHeight","hours","call","onClickHandler","setIsResizing","setState","coord","adjustEventTime","forceUpdate","onEventResize","asMonth","singleDayEvents","allDayEvents","onMouseMove","onEventClick","onEventDoubleClick","propsForAllDayEventContainer","onMouseUp","propsForDayContainer","renderEvents","root","PureComponent","number","XLabels","days","map","oneOf","YLabels","timeFormat","renderLabels","Array","fill","_","string","defaultProps","Dayz","calculateLayout","detachEventBindings","off","onEventAdd","nextProps","on","onEventsChange","subtract","weekday","onDayClick","onDayDoubleClick","renderDays","array"],"mappings":"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"}